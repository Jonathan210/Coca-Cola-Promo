<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coca-Cola | The Experience</title>
    <link rel="icon" href="assets/logo-4.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --bg-dark: #121212;
            --coke-red: #e60000;
            --text-light: #f0f0f0;
            --text-dim: #a0a0a0;
            --transition-speed: 0.8s;
        }

        /* --- GLOBAL RESET & SCROLL --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* FIX: Removed 'cursor: none;' from here to allow default cursor on touch devices */
        }

        /* NEW RULE: Re-apply cursor: none for desktop only */
        @media (min-width: 1025px) {
            * {
                cursor: none !important;
                /* Hide system cursor on desktop only */
            }
        }

        /* FIX: Add cursor pointer for interactive elements */
        a,
        button,
        .enter-btn,
        .nav-links a,
        .stat-box,
        .grid-product-card {
            cursor: pointer !important;
        }

        body {
            font-family: "Montserrat", sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            overflow-x: hidden;
            overflow-y: scroll;
            width: 100vw;
            opacity: 0;
            transition: opacity 1s;
            scroll-snap-type: y mandatory;
        }

        body.loaded {
            opacity: 1;
        }

        /* --- MAIN SECTIONS LAYOUT --- */
        section.main-section {
            height: 100vh;
            width: 100vw;
            position: relative;
            scroll-snap-align: start;
            overflow: hidden;
        }

        /* --- SECTION WIPE TRANSITION --- */
        #transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 150vw;
            height: 100vh;
            background-color: #0a0a0ab4;
            z-index: 500;
            pointer-events: none;
            transform: translateX(-100%);
            opacity: 0;
        }

        @keyframes wipe-in-out {
            0% {
                transform: translateX(-100%);
                opacity: 1;
            }

            50% {
                transform: translateX(0);
                opacity: 1;
            }

            100% {
                transform: translateX(100%);
                opacity: 1;
            }
        }

        .is-transitioning {
            animation: wipe-in-out 0.8s cubic-bezier(0.86, 0, 0.07, 1) forwards;
        }

        /* --- NAVIGATION --- */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(18, 18, 18, 0.85);
            border-bottom: var(--coke-red) 2px solid;
            padding: 20px 60px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            min-height: 60px;
            backdrop-filter: blur(10px);
        }

        .logo-img {
            height: 40px;
            width: auto;
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.8em;
            font-weight: 700;
            letter-spacing: 1px;
            transition: color 0.3s;
            text-transform: uppercase;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--coke-red);
        }

        /* --- SECTION 1: WELCOME --- */
        #welcome-section {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        #welcome-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.4;
        }

        .welcome-content h1 {
            font-family: "Oswald", sans-serif;
            font-size: 5em;
            font-weight: 900;
            color: var(--coke-red);
            text-transform: uppercase;
            margin-bottom: 10px;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.8);
        }

        .welcome-content p {
            font-size: 1.2em;
            font-weight: 600;
            letter-spacing: 2px;
            color: var(--text-light);
            margin-bottom: 40px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);
        }

        .enter-btn {
            display: inline-block;
            background-color: rgba(230, 0, 0, 0.8);
            color: white;
            padding: 15px 40px;
            font-weight: 700;
            letter-spacing: 2px;
            text-decoration: none;
            border-radius: 5px;
            text-transform: uppercase;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .enter-btn:hover {
            background-color: var(--coke-red);
            box-shadow: 0 0 20px rgba(230, 0, 0, 0.6);
            transform: scale(1.05);
        }

        /* --- SECTION 2: PRODUCTS (CAROUSEL) --- */

        #product-video-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -2;
            transform: translate(-50%, -50%);
            filter: brightness(0.6) grayscale(0.2);
            transition: filter 0.5s;
        }

        .hero-section-scroll {
            display: flex;
            height: 100%;
            width: 100%;
            overflow-x: scroll;
            overflow-y: hidden;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
            transition: opacity 0.5s;
        }

        .hero-section-scroll::-webkit-scrollbar {
            display: none;
        }

        /* Adjustment for the carousel container when grid is active */
        #product-section.grid-active #hero-scroll-container {
            opacity: 0.15;
            /* Dim the background carousel */
            pointer-events: none;
        }

        /* Adjustment for the product section when grid is active */
        #product-section.grid-active #product-video-bg {
            filter: brightness(0.4) grayscale(0.2);
        }

        .carousel-inner {
            display: flex;
            height: 100%;
            width: fit-content;
        }

        .slide {
            flex-shrink: 0;
            width: 100vw;
            display: grid;
            grid-template-columns: 3fr 2fr;
            height: 100%;
            padding-left: 50px;
            position: relative;
            background-color: rgba(18, 18, 18, 0.4);
            scroll-snap-align: start;
        }

        .product-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .coke-image {
            max-width: 105%;
            height: auto;
            filter: drop-shadow(0 0 50px var(--coke-red)) drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
            position: absolute;
            transition: all var(--transition-speed) ease-in-out;
        }

        .hero-content {
            position: absolute;
            backdrop-filter: blur(5px);
            top: 1px;
            right: 0;
            bottom: 0;
            width: 40vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 50px;
            background-image: linear-gradient(to bottom,
                    var(--coke-red),
                    rgba(0, 0, 0, 0.4));
            transition: background-color var(--transition-speed) ease-in-out;
            z-index: 5;
            position: absolute;
            align-items: center;
        }

        .headline {
            font-size: 4em;
            font-weight: 900;
            line-height: 1;
            margin-bottom: 20px;
            font-family: "Oswald", sans-serif;
            color: white;
        }

        /* New Styles for Product Grid View */

        /* Target the slideshow text content to hide it when grid is active */
        #slideshow-text-content {
            /* Preserve existing styles but allow for flex/grid to work within hero-content */
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            padding: 0 50px;
        }

        #slideshow-text-content.inactive {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s;
            pointer-events: none;
        }

        /* Styling for the Grid View Container (IMPROVED) */
        .product-grid-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 100px 30px 80px 30px;
            /* Increased padding */
            background-color: rgba(0, 0, 0, 0.95);
            /* Darker overlay for grid view */
            overflow-y: scroll;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 2fr));
            /* Better adaptive layout */
            gap: 10px;
            /* Increased gap */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s;
            z-index: 6;
            align-content: flex-start;
            box-shadow: inset 0 0 50px rgba(230, 0, 0, 0.1);
            /* Subtle internal glow */
        }

        .product-grid-view::-webkit-scrollbar {
            width: 8px;
        }

        .product-grid-view::-webkit-scrollbar-thumb {
            background-color: var(--coke-red);
            border-radius: 4px;
        }

        .product-grid-view.active {
            opacity: 1;
            visibility: visible;
        }

        /* Styling for the individual product card in the grid (IMPROVED) */
        .grid-product-card {
            background-color: #1a1a1a;
            border: 1px solid rgba(230, 0, 0, 0.2);
            /* Thinner, softer border */
            border-radius: 12px;
            /* Slightly larger border radius */
            padding: 15px 10px;
            /* More vertical padding */
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 230px;
            /* Fixed height for consistent look */
            max-height: 230px;
            position: relative;
            overflow: hidden;
            /* Deep internal shadow for an "embossed" look */
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5), 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .grid-product-card:hover {
            transform: translateY(-8px) scale(1.03);
            /* More pronounced lift and scale */
            box-shadow: 0 0 25px rgba(230, 0, 0, 0.7), inset 0 0 5px rgba(230, 0, 0, 0.3);
            /* Stronger outer glow */
            background-color: #202020;
            border-color: var(--coke-red);
        }

        .grid-product-card img {
            max-width: 100%;
            /* Slightly larger image */
            height: auto;
            max-height: 120px;
            /* Limit image height */
            object-fit: contain;
            display: block;
            margin: 0 auto 5px;
            /* Redder, more defined image shadow */
            filter: drop-shadow(0 5px 15px rgba(230, 0, 0, 0.4));
        }

        .grid-product-card h4 {
            font-size: 0.9em;
            /* Slightly larger font */
            font-weight: 700;
            text-transform: uppercase;
            color: white;
            /* Ensure high contrast */
            line-height: 1.2;
            margin-top: 5px;
            font-family: "Oswald", sans-serif;
            /* Use Oswald for prominence */
        }

        .grid-product-tag {
            font-size: 0.7em;
            /* Slightly larger tag */
            color: #ff6666;
            /* Lighter red for a subtle highlight */
            font-weight: 600;
            margin-bottom: 3px;
            letter-spacing: 1px;
        }

        /* Styling for the Toggle Button */
        #toggle-view-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            background-color: #000000;
            border: 2px solid var(--coke-red) !important;
            color: white !important;
            padding: 10px 20px !important;
            font-size: 0.8em;
            transition: all 0.3s;
        }

        #toggle-view-btn:hover {
            background-color: var(--coke-red) !important;
            box-shadow: 0 0 10px rgba(230, 0, 0, 0.6) !important;
        }

        /* Make sure button is visible on top of grid view */
        .product-grid-view.active+#toggle-view-btn {
            z-index: 11;
        }

        /* New styles for Nav Arrows (Added by the AI) */
        .nav-arrows {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100vw;
            /* Span the whole width of the section */
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            /* Padding for the arrows from the edge */
            z-index: 10;
        }

        .arrow-btn {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid var(--coke-red);
            color: white;
            font-size: 1.5em;
            padding: 15px 18px;
            border-radius: 50%;
            transition: all 0.3s;

            /* Make the buttons themselves clickable */
            backdrop-filter: blur(5px);
            line-height: 1;
            /* Center the icon */
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .arrow-btn:hover {
            background: var(--coke-red);
            box-shadow: 0 0 15px var(--coke-red);
        }

        /* --- SECTION 3: ABOUT - IMPROVED DESIGN START (Responsive Updates Integrated) --- */
        #about-section {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 100px 50px;
            position: relative;
            overflow: hidden;
        }

        #floating-coke-logo {
            position: absolute;
            top: 50%;
            right: 5%;
            width: 300px;
            opacity: 0.08;
            transform: translateY(-50%) rotate(0deg);
            z-index: 1;
            animation: float 10s ease-in-out infinite alternate;
        }

        @keyframes float {
            0% {
                transform: translateY(-55%) rotate(0deg) scale(1);
            }

            100% {
                transform: translateY(-45%) rotate(2deg) scale(1.05);
            }
        }

        .about-container {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            /* DESKTOP LAYOUT: 3 parts text, 2 parts stats */
            display: grid;
            grid-template-columns: 3fr 2fr;
            gap: 80px;
            align-items: center;
            z-index: 2;
        }

        .about-text h2 {
            font-family: "Oswald", sans-serif;
            font-size: 4em;
            color: var(--coke-red);
            border-bottom: 5px solid rgba(230, 0, 0, 0.5);
            padding-bottom: 15px;
            margin-bottom: 30px;
            text-transform: uppercase;
            display: inline-block;
        }

        .about-text h3 {
            font-family: "Montserrat", sans-serif;
            font-size: 1.3em;
            font-weight: 700;
            color: var(--text-light);
            margin-top: 30px;
            margin-bottom: 10px;
        }

        .about-text p {
            line-height: 1.6;
        }

        /* Ensure hover effects are transitionable for smooth look */
        .about-text p,
        .about-text h2,
        .about-text h3 {
            transition: transform 0.3s, text-shadow 0.3s;
        }

        .about-text:hover p,
        .about-text:hover h2,
        .about-text:hover h3 {
            transform: scale(1);
            text-shadow: #000000 0px 0px 5px;
        }

        .about-stats {
            /* DEFAULT DESKTOP: 2 columns */
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 0;
            padding: 0;
            /* Subtle divider */
            border-left: 1px solid rgba(230, 0, 0, 0.4);
            padding-left: 30px;
        }

        /* REDESIGNED STAT BOX */
        .stat-box {
            background: rgba(18, 18, 18, 0.9);
            /* Darker, more solid background */
            padding: 30px 20px;
            border-radius: 8px;
            border: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease-in-out;
            transform: translateY(0);
            position: relative;
            overflow: hidden;
            z-index: 3;
        }

        /* Red accent bar on the left */
        .stat-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            /* Thickness of the bar */
            height: 100%;
            background-color: var(--coke-red);
            transition: all 0.4s ease-out;
            z-index: -1;
        }

        .stat-box:hover {
            background: rgba(18, 18, 18, 1);
            transform: translateY(-5px) scale(1.02);
            /* Prominent red glow on hover */
            box-shadow: 0 0 25px rgba(230, 0, 0, 0.8), 0 0 5px rgba(230, 0, 0, 0.4);
        }

        /* Make red bar slightly transparent on hover for an inner glow effect */
        .stat-box:hover::before {
            width: 100%;
            opacity: 0.05;
        }

        .stat-number {
            /* IMPROVEMENT: Larger and use Oswald font for impact */
            font-size: 3.2em;
            font-weight: 700;
            color: var(--coke-red);
            font-family: "Oswald", sans-serif;
            line-height: 1.1;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            /* IMPROVEMENT: Better readability for label */
            display: block;
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1.4;
        }

        /* --- END IMPROVED DESIGN --- */

        /* --- SECTION 4: CONTACT (UPDATED: Social Accounts Grid) --- */
        #contact-section {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 100px 50px;
            text-align: center;
        }

        .contact-container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        .contact-container h2 {
            font-family: "Oswald", sans-serif;
            font-size: 4em;
            color: whitesmoke;
            border-bottom: 5px solid rgba(230, 0, 0, 0.5);
            padding-bottom: 15px;
            margin-bottom: 20px;
            text-transform: uppercase;
            display: inline-block;
        }

        .contact-container>p {
            font-size: 1.1em;
            color: whitesmoke;
            margin-bottom: 50px;
        }

        /* NEW: Social Accounts Grid Styles */
        .social-accounts-grid {
            display: grid;
            grid-template-columns: repeat(3, 2fr);
            /* 4 blocks on desktop */
            gap: 30px;
            margin-top: 40px;
        }

        .social-block {
            background: #1a1a1aa9;
            padding: 30px 20px;
            border-radius: 8px;
            border: 1px solid rgba(230, 0, 0, 0.2);
            text-align: center;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .social-block:hover {
            transform: translateY(-5px) scale(1.03);
            background-color: #202020;
            border-color: var(--coke-red);
            box-shadow: 0 0 20px rgba(230, 0, 0, 0.7);
        }

        .social-block h3 {
            font-family: "Oswald", sans-serif;
            font-size: 1.5em;
            color: whitesmoke;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .social-block h3 i {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .social-block p {
            font-size: 0.9em;
        }

        .social-block a {
            color: var(--text-dim);
            text-decoration: none;
            transition: color 0.3s;
        }

        .social-block a:hover {
            color: var(--coke-red) !important;
        }

        /* --- END CONTACT STYLES --- */

        /* --- MODAL STYLES --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--bg-dark);
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s;
            border: 2px solid var(--coke-red);
        }

        .modal-overlay.open .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        #modal-image {
            width: 80px;
            height: auto;
            margin-right: 20px;
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
        }

        /* UPDATED: Added flex for multi-column layout */
        .modal-ingredients li {
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
            font-size: 0.9em;
            color: var(--text-dim);
        }

        .modal-ingredients li:last-child {
            border-bottom: none;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--text-dim);
            font-size: 2em;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1;
        }

        .close-btn:hover {
            color: var(--coke-red);
        }

        /* --- CUSTOM CURSOR (Keep Z-index for max visibility) --- */
        #custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 15px;
            height: 15px;
            border: 2px solid white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: exclusion;
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }

        #custom-cursor.grow {
            width: 25px;
            height: 25px;
            background-color: rgba(255, 255, 255, 0.1);
            border-color: var(--coke-red);
        }

        /* --- RESPONSIVENESS START --- */
        @media (max-width: 1024px) {
            html { scroll-snap-type: y proximity; }
            #custom-cursor { display: none; }
            
            .slide {
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                align-items: center;
                padding: 100px 0 0 0;
                grid-template-columns: 1fr;
            }

            .product-visual {
                height: 45vh;
                width: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .coke-image {
                max-height: 100%;
                max-width: 60%;
                width: auto;
                position: relative;
                filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
                transform: none !important;
            }

            .hero-content {
                position: absolute;
                bottom: 0;
                width: 100%;
                height: 55vh;
                padding: 30px 15px;
                background-image: linear-gradient(to top, var(--coke-red), #121212 90%, transparent);
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 10;
            }

            #slideshow-text-content {
                align-items: center;
                text-align: center;
                width: 100%;
                padding: 0;
                opacity: 1 !important;
                visibility: visible !important;
            }

            .headline { font-size: 2.8em; margin-bottom: 15px; }
            #description { font-size: 1em; max-width: 500px; margin: 0 auto 20px; }
            
            #toggle-view-btn {
                position: relative;
                margin-top: 10px;
                width: auto;
            }

            .nav-arrows { top: 40%; padding: 0 10px; }
            
            .product-grid-view {
                padding: 100px 20px 80px;
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }

            #about-section { padding: 60px 20px; overflow-y: auto; }
            
            .about-container {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 0;
            }

            .about-text {
                text-align: center;
                margin-top: 100vw;
            }

            .about-text h2 { font-size: 0.9em; margin-bottom: 20px; }
            .about-text h3 { font-size: 0.9em; margin-top: 15px; }
            .about-text p { font-size: 0.85em; }
            
            .about-stats {
                grid-template: repeat(1, 1fr);
                gap: 10px;
                margin-top: 15px;
            }

            .social-accounts-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .navbar { padding: 15px; justify-content: center; }
            .nav-links { display: none; }
            
            .welcome-content h1 { font-size: 2.5em; }
            
            .slide { padding-top: 80px; }
            
            .product-visual { height: 35vh; }
            
            .hero-content {
                height: 60vh;
                padding: 20px 10px;
                background-image: linear-gradient(to top, var(--coke-red), #121212 85%, transparent);
            }

            .headline { font-size: 2.2em; }
            
            .grid-product-card { height: 180px; }
            .grid-product-card img { max-height: 80px; }
            
            #about-section { padding: 40px 15px; }
            
            .about-container { gap: 20px; }
            
            .about-text h2 { font-size: 2.2em; }
            .about-text h3 { font-size: 1em; margin-top: 15px; }
            
            .about-stats {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-top: 15px;
            }

            .stat-box { padding: 15px; }
            .stat-number { font-size: 2em; }
            .stat-label { font-size: 0.8em; }
            
            #floating-coke-logo { width: 150px; }
            
            .social-accounts-grid { grid-template-columns: 1fr; }
            
            .modal-content {
                width: 95%;
                padding: 15px;
                max-height: 85vh;
                overflow-y: auto;
            }
        }
    </style>
</head>

<body>

    <div id="custom-cursor"></div>
    <div id="transition-overlay"></div>

    <nav class="navbar">
        <img src="assets/logo-4.png" alt="Coca-Cola Logo" class="logo-img">
        <div class="nav-links">
            <a href="#welcome-section" class="active">WELCOME</a>
            <a href="#product-section">PRODUCTS</a>
            <a href="#about-section">ABOUT</a>
            <a href="#contact-section">CONTACT</a>
        </div>
    </nav>

    <section id="welcome-section" class="main-section">
        <!-- <video autoplay loop playsinline id="welcome-video">
            <source src="assets/Welcome.mp4" type="video/mp4">
        </video> -->
        <div class="welcome-content">
            <h1 id="site-title" class="animated-element fade-in-up">The Refreshing Experience</h1>
            <p class="animated-element fade-in-up" style="transition-delay: 0.2s;">Discover the taste of the world's
                favorite drink.</p>
            <a href="#product-section" class="enter-btn animated-element fade-in-up" style="transition-delay: 0.4s;"
                id="start-experience-btn">Start Experience</a>
        </div>
    </section>

    <section id="product-section" class="main-section">
        <video autoplay muted loop playsinline id="product-video-bg">
            <source src="assets/Product.mp4" type="video/mp4">
        </video>
        <div class="hero-content" id="product-hero-content">
            <div class="hero-text text-active" id="slideshow-text-content">
                <span style="font-size: 0.9em; letter-spacing: 2px; font-weight: 600;" id="product-tag">THE
                    ORIGINAL</span>
                <h1 class="headline" id="headline">ORIGINAL TASTE</h1>
                <p id="description" style="margin-bottom: 20px; line-height: 1.6;">The world's most popular soft drink.
                </p>
                <a href="#" class="enter-btn" id="drink-now-btn"
                    style="background: transparent; border: 1px solid white;">View Facts</a>
            </div>
            <button id="toggle-view-btn" class="enter-btn">View All Products</button>
        </div>

        <div class="hero-section-scroll" id="hero-scroll-container">
            <div class="carousel-inner" id="carousel-inner">
            </div>
        </div>

        <div class="left-pagination">
            <span id="current-slide">01</span> / <span id="total-slides">14</span>
        </div>
        <div class="nav-arrows">
            <button class="arrow-btn" id="prev-btn"><i class="fas fa-chevron-left"></i></button>
            <button class="arrow-btn" id="next-btn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <section id="about-section" class="main-section">
        <video autoplay muted loop playsinline id="product-video-bg">
            <source src="assets/About.mp4" type="video/mp4">
        </video>
        <div class="about-container">
            <div class="about-text">
                <h2 class="animated-element fade-in-up">A Global Icon & Purpose</h2>
                <p class="animated-element fade-in-up" style="transition-delay: 0.2s;">The Coca-Cola Company (NYSE: KO)
                    is a total beverage company with products sold in more than 200 countries and territories. Our
                    companyâ€™s purpose is to refresh the world and make a difference.</p>

                <h3 class="animated-element fade-in-up" style="transition-delay: 0.4s;">Our Enduring Legacy</h3>
                <p class="animated-element fade-in-up" style="transition-delay: 0.6s;">Invented in 1886 by Dr. John
                    Stith Pemberton in Atlanta, Georgia, Coca-Cola was first offered as a fountain beverage at Jacob's
                    Pharmacy. It quickly grew into a cultural phenomenon. Today, Coca-Cola is one of the world's most
                    recognized and valuable brands, transcending its role as a simple beverage to become a symbol of
                    shared moments and optimism worldwide.</p>

                <h3 class="animated-element fade-in-up" style="transition-delay: 0.8s;">Commitment to Sustainability
                </h3>
                <p class="animated-element fade-in-up" style="transition-delay: 1.0s;">We are dedicated to building a
                    sustainable future by focusing on water stewardship, circular economy for packaging, and reducing
                    our carbon footprint across the value chain.</p>
            </div>
            <div class="about-stats animated-element fade-in-up" style="transition-delay: 1.2s;">
                <div class="stat-box">
                    <span class="stat-number">135+</span>
                    <span class="stat-label">Years of Refreshment</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">200+</span>
                    <span class="stat-label">Countries with Coca-Cola</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">400+</span>
                    <span class="stat-label">Total Brands Worldwide</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">1.9B</span>
                    <span class="stat-label">Servings Daily</span>
                </div>
            </div>
        </div>
    </section>

    <section id="contact-section" class="main-section">
        <video autoplay muted loop playsinline id="product-video-bg">
            <source src="assets/Contact.mp4" type="video/mp4">
        </video>
        <div class="contact-container">
            <h2 class="animated-element fade-in-up">Connect With Us</h2>
            <p class="animated-element fade-in-up" style="transition-delay: 0.1s;">Find the latest news, updates, and
                more on our social media platforms.</p>

            <div class="social-accounts-grid">
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.3s;">
                    <h3><i class="fab fa-facebook-f"></i> Facebook</h3>
                    <p><a href="https://web.facebook.com/CocaColaPhilippines/?_rdc=1&_rdr#" target="_blank"
                            style="color: var(--text-dim);">@Coca-Cola</a></p>
                </div>
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.4s;">
                    <h3><i class="fab fa-twitter"></i> X (Twitter)</h3>
                    <p><a href="https://x.com/CocaColaPH" target="_blank"
                            style="color: var(--text-dim);">@CocaColaPH</a></p>
                </div>
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.5s;">
                    <h3><i class="fab fa-instagram"></i> Instagram</h3>
                    <p><a href="https://www.instagram.com/cocacolaph/" target="_blank"
                            style="color: var(--text-dim);">@cocacolaph</a></p>
                </div>
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.6s;">
                    <h3><i class="fab fa-youtube"></i> YouTube</h3>
                    <p><a href="https://www.youtube.com/@CocaColaPhilippinesOfficial" target="_blank"
                            style="color: var(--text-dim);">Coca-Cola Philippines</a></p>
                </div>
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.6s;">
                    <h3><i class="fas fa-envelope"></i> Email</h3>
                    <p><a href="mailto:phicommunications@coca-cola.com" target="_blank"
                            style="color: var(--text-dim);">phicommunications@coca-cola.com</a></p>
                </div>
                <div class="social-block animated-element fade-in-up" style="transition-delay: 0.7s;">
                    <h3><i class="fas fa-map-marker-alt"></i> Corporate HQ</h3>
                    <p>Atlanta, Georgia, USA</p>
                </div>
            </div>
        </div>
    </section>


    <div id="product-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-headline"
        aria-describedby="modal-description" aria-hidden="true">
        <div class="modal-content">
            <button class="close-btn" aria-label="Close modal">&times;</button>
            <div class="modal-header">
                <img id="modal-image" src="" alt="">
                <div>
                    <span style="font-size: 0.8em; letter-spacing: 2px; font-weight: 600;" id="modal-tag"></span>
                    <h2 id="modal-headline" style="color: var(--coke-red);">PRODUCT NAME</h2>
                </div>
            </div>
            <p id="modal-description" style="margin-bottom: 20px; line-height: 1.6; color: var(--text-light);"></p>
            <h3 style="color: white; margin-bottom: 15px;">Nutrition Facts (Per 12 fl oz)</h3>
            <ul id="modal-ingredients-list" class="modal-ingredients">
            </ul>
            <button id="final-drink-now-btn" class="enter-btn"
                style="margin-top: 25px; width: 100%; text-align: center;">Enjoy A Coca-Cola</button>
        </div>
    </div>


    <script>
        // Data for the products
        const productData = [
            {
                name: "COCA-COLA ORIGINAL TASTE",
                headline: "THE CLASSIC REFRESHMENT",
                description: "The world's most popular and best-selling soft drink, enjoyed by billions globally since 1886. The classic taste that started it all.",
                imageSrc: "./assets/coke-classic.png",
                bgColor: "#AA0000",
                productTag: "THE ORIGINAL",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA ZERO SUGAR",
                headline: "ZERO SUGAR. REAL TASTE.",
                description: "Coca-Cola Zero Sugar, or Coke Zero, is a sugar-free soft drink that tastes like the original but has zero sugar and zero calories.",
                imageSrc: "./assets/coke-zero.png",
                bgColor: "#333333",
                productTag: "COCA COLA ZERO",
                keyIngredients: "Carbonated Water, Caramel Color, Phosphoric Acid, Aspartame, Potassium Benzoate (to protect taste), Natural Flavors, Citric Acid, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "0", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "0g", dailyValue: "0%" },
                    { name: "Total Sugars", amount: "0g", dailyValue: "0%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "DIET COKE",
                headline: "CRISP AND LIGHT",
                description: "Diet Coke offers a light, crisp, zero-calorie refreshment with a flavor profile distinct from Coke Zero.",
                imageSrc: "./assets/coke-diet.png",
                bgColor: "#A0A0A0",
                productTag: "COCA-COLA LIGHT",
                keyIngredients: "Carbonated Water, Caramel Color, Aspartame, Phosphoric Acid, Potassium Benzoate (to protect taste), Natural Flavors, Citric Acid, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "0", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "0g", dailyValue: "0%" },
                    { name: "Total Sugars", amount: "0g", dailyValue: "0%" },
                    { name: "Caffeine", amount: "46mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA CHERRY",
                headline: "SWEET CHERRY BURST",
                description: "Coca-Cola with a classic hint of cherry flavor, offering a sweeter and fruitier take on the original.",
                imageSrc: "./assets/coke-cherry.png",
                bgColor: "#8B0000",
                productTag: "CLASSIC FLAVOR",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Caffeine, Cherry Flavoring.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "150", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "30mg", dailyValue: "1%" },
                    { name: "Total Carbohydrates", amount: "42g", dailyValue: "15%" },
                    { name: "Total Sugars", amount: "42g", dailyValue: "84%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA VANILLA",
                headline: "SMOOTH VANILLA INFUSION",
                description: "The satisfying taste of Coca-Cola mixed with smooth, rich vanilla flavor.",
                imageSrc: "./assets/coke-vanilla.png",
                bgColor: "#E9967A",
                productTag: "SWEET TREAT",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Natural Flavors, Phosphoric Acid, Caffeine, Vanilla Extract.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "35mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA CHERRY VANILLA",
                headline: "CHERRY MEETS VANILLA",
                description: "A delicious fusion of classic Coca-Cola, sweet cherry, and smooth, creamy vanilla.",
                imageSrc: "./assets/coke-cherry-vanilla.png",
                bgColor: "#6C005E",
                productTag: "DOUBLE FLAVOR",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Cherry Juice Concentrate, Vanilla Extract, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "150", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "30mg", dailyValue: "1%" },
                    { name: "Total Carbohydrates", amount: "42g", dailyValue: "15%" },
                    { name: "Total Sugars", amount: "42g", dailyValue: "84%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA ORANGE VANILLA",
                headline: "CREAMY CITRUS TWIST",
                description: "A delicious combination of crisp Coca-Cola taste with a smooth, sweet orange and vanilla flavor.",
                imageSrc: "./assets/coke-orange-vanilla.png",
                bgColor: "#FF7F00",
                productTag: "FLAVOR BLAST",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Natural Flavors, Phosphoric Acid, Orange Juice Concentrate, Vanilla Extract, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "35mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA WITH LEMON",
                headline: "TANGY LEMON ZEST",
                description: "A refreshing twist on the classic cola taste with a vibrant, zesty lemon flavor.",
                imageSrc: "./assets/coke-lemon.png",
                bgColor: "#FFD700",
                productTag: "CITRUS TWIST",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Lemon Juice Concentrate, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA WITH LIME",
                headline: "ZESTY LIME KICK",
                description: "A bright, refreshing citrus note added to the classic Coca-Cola formula for extra zing.",
                imageSrc: "./assets/coke-lime.png",
                bgColor: "#8BC34A",
                productTag: "CITRUS POP",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Lime Juice Concentrate, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA MANGO",
                headline: "EXOTIC MANGO FLAVOR",
                description: "A bold and fruity twist to the classic cola, combining the refreshing taste of Coca-Cola with sweet tropical mango.",
                imageSrc: "./assets/coke-mango.png",
                bgColor: "#FFB400",
                productTag: "TROPICAL COLA",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Mango Juice Concentrate, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "150", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "30mg", dailyValue: "1%" },
                    { name: "Total Carbohydrates", amount: "42g", dailyValue: "15%" },
                    { name: "Total Sugars", amount: "42g", dailyValue: "84%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA RASPBERRY LTD",
                headline: "BRIGHT BERRY LIMITED EDITION",
                description: "An exciting, limited-time twist of refreshing raspberry flavor blended perfectly with Coca-Cola.",
                imageSrc: "./assets/coke-limited-edition-raspberry.png",
                bgColor: "#DC143C",
                productTag: "LIMITED EDITION",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Raspberry Juice Concentrate, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "COCA-COLA CITRA",
                headline: "LEMON-LIME REFRESHMENT",
                description: "A uniquely refreshing combination of Coca-Cola with a vibrant blend of lemon and lime citrus flavors.",
                imageSrc: "./assets/coke-citra.png",
                bgColor: "#4CAF50",
                productTag: "CITRUS BLAST",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors, Lemon and Lime Juice Concentrates, Caffeine.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "34mg", dailyValue: "-" }
                ]
            },
            {
                name: "CAFFEINE-FREE COCA-COLA",
                headline: "GREAT TASTE, NO CAFFEINE",
                description: "The classic Coca-Cola taste, but completely caffeine-free for any time of day.",
                imageSrc: "./assets/coke-caffine-free.png",
                bgColor: "#B53333",
                productTag: "CAFFEINE FREE",
                keyIngredients: "Carbonated Water, High Fructose Corn Syrup, Caramel Color, Phosphoric Acid, Natural Flavors.",
                nutritionBreakdown: [
                    { name: "Calories", amount: "140", dailyValue: "-" },
                    { name: "Total Fat", amount: "0g", dailyValue: "0%" },
                    { name: "Sodium", amount: "40mg", dailyValue: "2%" },
                    { name: "Total Carbohydrates", amount: "39g", dailyValue: "14%" },
                    { name: "Total Sugars", amount: "39g", dailyValue: "78%" },
                    { name: "Caffeine", amount: "0mg", dailyValue: "-" }
                ]
            }
        ];

        // --- GLOBAL VARIABLES (No Change) ---
        let currentIndex = 0;
        const totalSlides = productData.length;
        let autoSlideInterval;
        const scrollContainer = document.getElementById('hero-scroll-container');
        const slideshowContent = document.getElementById('slideshow-text-content');
        const modal = document.getElementById('product-modal');
        const closeModalBtn = modal.querySelector('.close-btn');
        let lastFocusedElement = null;
        const productSection = document.getElementById('product-section');

        // --- SOUND MANAGER (No Change) ---
        class SoundManager {
            constructor() {
                try {
                    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                    this.buffers = {};
                    this.started = false;
                } catch (e) {
                    console.warn("Audio not supported");
                }
            }

            async load(name, url) {
                if (!this.ctx) return;
                try {
                    const res = await fetch(url);
                    const buf = await res.arrayBuffer();
                    this.buffers[name] = await this.ctx.decodeAudioData(buf);
                } catch (error) {
                    console.error(`Error loading sound ${name}:`, error);
                }
            }

            play(name, loop = false, volume = 1.0) {
                if (!this.ctx || !this.buffers[name]) return;
                const source = this.ctx.createBufferSource();
                const gainNode = this.ctx.createGain();
                source.buffer = this.buffers[name];
                source.loop = loop;
                gainNode.gain.value = volume;
                source.connect(gainNode);
                gainNode.connect(this.ctx.destination);
                source.start(0);
                return source;
            }
        }
        const soundMgr = new SoundManager();

        // NEW: Grid View Variables
        const productGridContainer = document.createElement('div');
        productGridContainer.id = 'product-grid-view';
        productGridContainer.className = 'product-grid-view';
        let isGridViewActive = false; // Track the current view

        // NEW: Welcome Video Control Functions
        function startWelcomeVideoAndAudio(videoElement) {
            if (videoElement) {
                // Attempt to un-mute and play the video.
                videoElement.muted = false;
                videoElement.play().catch(e => {
                    // If play fails (e.g., audio context suspended), console log and re-mute to comply with browser rules
                    console.log('Welcome video play failed (browser policy or similar).', e);
                    videoElement.muted = true;
                });
            }
        }

        function stopWelcomeVideoAndAudio(videoElement) {
            if (videoElement) {
                // Mute the audio and pause the video, as requested
                videoElement.muted = true;
                videoElement.pause();
                // Reset to start for a fresh play when scrolling back
                videoElement.currentTime = 0;
            }
        }

        // --- CAROUSEL CONTROL FUNCTIONS (No Change) ---
        function stopAutoSlide() {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }

        function startAutoSlide() {
            // Only start if it's not already running
            if (autoSlideInterval) return;
            autoSlideInterval = setInterval(() => {
                // Also check if modal is open or grid is open to pause auto-slide
                if (!document.getElementById('product-modal').classList.contains('open') && !isGridViewActive) {
                    let next = (currentIndex + 1) % totalSlides;
                    scrollToSlideIndex(next);
                }
            }, 6000);
        }

        function resetAutoSlide() {
            stopAutoSlide();
            startAutoSlide();
        }

        function updateSlide(index) {
            if (index === currentIndex) return;

            const data = productData[index];
            const isDesktop = window.innerWidth > 850;

            if (isDesktop) soundMgr.play('trans', false, 0.5);

            // 1. Animate Text Out
            slideshowContent.classList.remove('text-active', 'text-entering');
            slideshowContent.classList.add('text-leaving');

            // 2. Animate Image Out
            const oldImage = document.querySelector('.coke-image[data-index="' + currentIndex + '"]');
            if (oldImage) {
                oldImage.classList.add('image-leaving');
            }


            // Wait for animation to complete (400ms)
            setTimeout(() => {
                // 3. Update Content
                currentIndex = index;

                // Update Text Content
                document.getElementById('product-tag').innerText = data.productTag;
                document.getElementById('product-tag').style.color = data.bgColor;
                document.getElementById('headline').innerText = data.headline;
                document.getElementById('description').innerText = data.description;

                // Update Background Color (via the hero-content)
                const heroContent = document.getElementById('product-hero-content');
                heroContent.style.backgroundImage = `linear-gradient(to bottom, ${data.bgColor}, rgba(0, 0, 0, 0.4))`;


                // Reset all images to hidden and remove old leaving class
                document.querySelectorAll('.coke-image').forEach(img => {
                    img.style.opacity = '0';
                    img.classList.remove('image-leaving');
                });

                // Show new image
                const newImage = document.querySelector('.coke-image[data-index="' + index + '"]');
                if (newImage) {
                    newImage.style.opacity = '1';
                }

                // 4. Animate Text In
                slideshowContent.classList.remove('text-leaving');
                slideshowContent.classList.add('text-entering');
                setTimeout(() => {
                    slideshowContent.classList.remove('text-entering');
                    slideshowContent.classList.add('text-active');
                }, 100);

                // 5. Update Pagination
                document.getElementById('current-slide').innerText = (index + 1).toString().padStart(2, '0');
                document.getElementById('total-slides').innerText = totalSlides.toString().padStart(2, '0');
            }, 400); // Should match CSS transition speed for animations
        }

        function scrollToSlideIndex(index) {
            const slide = document.querySelector(`.slide[data-index="${index}"]`);
            if (slide) {
                // Smooth scroll the carousel container horizontally
                scrollContainer.scrollTo({
                    left: slide.offsetLeft,
                    behavior: 'smooth'
                });
                updateSlide(index);
                // No need to resetAutoSlide here as it's called by showNextSlide/showPrevSlide
            }
        }

        // NEW: Arrow Navigation Functions (Added by the AI)
        function showNextSlide() {
            let next = (currentIndex + 1) % totalSlides;
            scrollToSlideIndex(next);
            resetAutoSlide();
        }

        function showPrevSlide() {
            // Add totalSlides before modulo to ensure the result is positive when currentIndex is 0
            let prev = (currentIndex - 1 + totalSlides) % totalSlides;
            scrollToSlideIndex(prev);
            resetAutoSlide();
        }

        // --- MODAL FUNCTIONS (No Change) ---
        function openModal() {
            soundMgr.play('open');
            modal.classList.add('open');
            modal.setAttribute('aria-hidden', 'false');

            // A11Y: Store the element that was focused before opening the modal
            lastFocusedElement = document.activeElement;
            // Pause auto slide when modal is open
            stopAutoSlide();

            const d = productData[currentIndex];
            document.getElementById('modal-image').src = d.imageSrc;
            document.getElementById('modal-tag').innerText = d.productTag;
            document.getElementById('modal-headline').innerText = d.name;
            document.getElementById('modal-headline').style.color = d.bgColor;
            document.getElementById('modal-description').innerText = d.description;

            const list = document.getElementById('modal-ingredients-list');
            list.innerHTML = ''; // Clear previous content

            // 1. Add Key Ingredients section (Full width row)
            const ingredientsLi = document.createElement('li');
            // Inline styles to force stack layout and visual separation
            ingredientsLi.style.flexDirection = 'column';
            ingredientsLi.style.alignItems = 'flex-start';
            ingredientsLi.style.padding = '10px 0 15px 0';
            ingredientsLi.style.borderBottom = '1px solid rgba(255,255,255,0.2)'; // Solid line for separation
            ingredientsLi.innerHTML = `
                <span style="color:var(--coke-red); font-weight:700; margin-bottom: 5px; font-size:1em;">KEY INGREDIENTS:</span>
                <span style="color:var(--text-dim); font-size: 0.85em; line-height: 1.4;">${d.keyIngredients}</span>
            `;
            list.appendChild(ingredientsLi);


            // 2. Add Nutrition Facts Header (Table Header Row)
            const headerLi = document.createElement('li');
            headerLi.style.fontWeight = '700';
            headerLi.style.borderTop = '4px solid white'; // Thick top line
            headerLi.style.borderBottom = '2px solid white'; // Thicker bottom
            headerLi.style.color = 'white';
            headerLi.innerHTML = `
                <span>AMOUNT PER SERVING</span>
                <span>% DAILY VALUE</span>
            `;
            list.appendChild(headerLi);

            // 3. Add Nutrition Breakdown
            d.nutritionBreakdown.forEach(item => {
                const li = document.createElement('li');
                // Highlight Calories and Caffeine
                if (item.name === 'Calories' || item.name === 'Caffeine') {
                    li.style.color = 'white';
                    li.style.fontWeight = '700';
                }
                li.innerHTML = `
                    <span>${item.name}: <strong>${item.amount}</strong></span>
                    <span>${item.dailyValue}</span>
                `;
                list.appendChild(li);
            });
        }

        function closeModal() {
            modal.classList.remove('open');
            modal.setAttribute('aria-hidden', 'true');
            soundMgr.play('close');
            // A11Y: Return focus to the element that was focused before opening the modal
            if (lastFocusedElement) {
                lastFocusedElement.focus();
            }
            // Resume auto slide only if we are on the product section and grid view is not active
            if (document.location.hash === '#product-section' && !isGridViewActive) {
                startAutoSlide();
            }
        }

        // --- PRODUCT GRID FUNCTIONS (No Change) ---
        function buildProductGrid() {
            productData.forEach((d, i) => {
                const card = document.createElement('div');
                card.className = 'grid-product-card';
                card.innerHTML = `
                    <span class="grid-product-tag" style="color: ${d.bgColor};">${d.productTag}</span>
                    <img src="${d.imageSrc}" alt="${d.name}">
                    <h4>${d.name.replace('COCA-COLA ', '')}</h4>
                `;
                // MODIFIED: Add event listener to switch to the specific slide
                card.addEventListener('click', (e) => {
                    if (e.target.tagName !== 'A') {
                        e.preventDefault();
                        // 1. Set the current index to the selected product
                        currentIndex = i;
                        // 2. If the grid view is active, switch back to the slideshow view
                        if (isGridViewActive) {
                            toggleProductView();
                        }
                        // 3. Scroll the main product carousel to the selected slide
                        scrollToSlideIndex(i);
                    }
                });
                productGridContainer.appendChild(card);
            });
            document.getElementById('product-hero-content').appendChild(productGridContainer);
        }

        function toggleProductView() {
            const toggleBtn = document.getElementById('toggle-view-btn');
            isGridViewActive = !isGridViewActive;
            if (isGridViewActive) {
                // Switch to Grid View
                productGridContainer.classList.add('active');
                slideshowContent.classList.add('inactive'); // Hide slideshow text
                productSection.classList.add('grid-active'); // Set class on section for background dimming
                toggleBtn.innerText = "Back to Slideshow";
                stopAutoSlide(); // Important: Stop slideshow when grid is open
            } else {
                // Switch back to Slideshow View
                productGridContainer.classList.remove('active');
                slideshowContent.classList.remove('inactive'); // Show slideshow text
                productSection.classList.remove('grid-active'); // Remove class to restore background
                toggleBtn.innerText = "View All Products";
                startAutoSlide(); // Resume slideshow
            }
            soundMgr.play('click');
        }

        // --- SECTION ANIMATION LOGIC (Scroll Reveal - No Change) ---
        function setupSectionAnimations(sectionId) {
            // REFACTORED to be generic
            const section = document.getElementById(sectionId);
            if (!section) return;

            const elementsToAnimate = section.querySelectorAll('.animated-element');

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        elementsToAnimate.forEach(el => {
                            el.classList.add('animate-ready');
                        });
                        observer.unobserve(section); // Stop observing after animation
                    }
                });
            }, {
                root: null,
                rootMargin: '0px',
                threshold: 0.3
            });

            observer.observe(section);
        }

        // --- SECTION TRANSITION LOGIC (No Change) ---
        function transitionToSection(targetSelector) {
            const overlay = document.getElementById('transition-overlay');
            overlay.classList.add('is-transitioning');
            // Play sound
            soundMgr.play('trans', false, 0.8);

            // Navigate after half of the transition animation (400ms)
            setTimeout(() => {
                document.querySelector(targetSelector).scrollIntoView({
                    behavior: 'smooth'
                });
            }, 400);

            // Wipe Out (800ms)
            setTimeout(() => {
                overlay.classList.remove('is-transitioning');
                // If navigating to the product section AND grid is NOT active, start the auto slide here
                if (targetSelector === '#product-section' && !isGridViewActive) {
                    startAutoSlide();
                }
            }, 800);
        }


        // MODIFIED: Function to handle initial user interaction for sound.
        function startAudio() {
            if (soundMgr.ctx && soundMgr.ctx.state === 'suspended') {
                soundMgr.ctx.resume();
            }
            // MODIFICATION: Unmute and play the welcome video on first interaction if on welcome section
            const welcomeVideo = document.getElementById('welcome-video');
            // Check if we are on the welcome section (or initial load before scrolling) and the video exists
            if ((document.location.hash === '' || document.location.hash === '#welcome-section') && welcomeVideo) {
                welcomeVideo.muted = false; // Allow audio after first interaction
                // Attempt to play (browser will allow since it's user-initiated)
                welcomeVideo.play().catch(e => {
                    console.log('Welcome Video resume failed on interaction:', e);
                    welcomeVideo.muted = true; // Re-mute if play fails
                });
            }
        }


        // --- SCROLL SNAP INTERSECTION OBSERVER LOGIC (MODIFIED to include welcome video control) ---
        function setupScrollTransitionObserver(welcomeVideo) {
            const sections = document.querySelectorAll('.main-section');
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.6
            };
            let lastSectionIndex = 0; // Track last section for transition logic
            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const currentSectionId = '#' + entry.target.id;
                        const currentSectionIndex = Array.from(sections).indexOf(entry.target);

                        // NEW: WELCOME SECTION VIDEO/AUDIO AUTOPLAY/STOP LOGIC
                        if (currentSectionId === '#welcome-section') {
                            startWelcomeVideoAndAudio(welcomeVideo);
                        } else {
                            stopWelcomeVideoAndAudio(welcomeVideo);
                        }

                        // PRODUCT SLIDESHOW AUTOPLAY LOGIC
                        if (currentSectionId === '#product-section' && !isGridViewActive) {
                            startAutoSlide();
                        } else {
                            stopAutoSlide();
                        }

                        // TRANSITION LOGIC
                        // Only apply transition if moving to a *different* and *adjacent* section
                        if (currentSectionIndex !== lastSectionIndex && Math.abs(currentSectionIndex - lastSectionIndex) === 1) {
                            // Immediately apply the wipe transition
                            const overlay = document.getElementById('transition-overlay');
                            overlay.classList.add('is-transitioning');
                            // Play sound
                            soundMgr.play('trans', false, 0.8);

                            // The transition animation takes 0.8s. We remove the class after it completes
                            setTimeout(() => {
                                overlay.classList.remove('is-transitioning');
                            }, 800);
                        }

                        // Update active navigation link
                        document.querySelectorAll('.nav-links a').forEach(a => {
                            a.classList.remove('active');
                            if (a.getAttribute('href') === currentSectionId) {
                                a.classList.add('active');
                            }
                        });

                        lastSectionIndex = currentSectionIndex;
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                scrollObserver.observe(section);
            });
        }


        // --- CUSTOM CURSOR LOGIC (No Change) ---
        function setupCustomCursor() {
            const cursor = document.getElementById('custom-cursor');
            if (cursor) {
                document.addEventListener('mousemove', e => {
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';
                });
                // Updated selector to include .grid-product-card
                document.querySelectorAll('a, button, .slide, .stat-box, .close-btn, .grid-product-card, .social-block').forEach(el => {
                    el.addEventListener('mouseenter', () => cursor.classList.add('grow'));
                    el.addEventListener('mouseleave', () => cursor.classList.remove('grow'));
                });
            }
        }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', async () => {

            document.body.classList.add('loaded'); // Fade in the body once everything is loaded

            // Load Sounds (Paths assumed from original upload)
            const p1 = soundMgr.load('bg', 'assets/Coke - Open happiness sound.mp3');
            const p2 = soundMgr.load('trans', 'assets/Coke - Can open sound.mp3');
            const p3 = soundMgr.load('open', 'assets/Coke - Refreshing sound.mp3');
            const p4 = soundMgr.load('close', 'assets/Coke - Bubbles sound.mp3');
            const p5 = soundMgr.load('click', 'assets/Coke - Glass clink sound.mp3');

            await Promise.all([p1, p2, p3, p4, p5]);


            // 1. Build Carousel Slides (No Change)
            const carouselInner = document.getElementById('carousel-inner');
            productData.forEach((data, index) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.setAttribute('data-index', index);
                slide.innerHTML = `
                    <div class="product-visual">
                        <img src="${data.imageSrc}" alt="${data.name}" class="coke-image" data-index="${index}" style="opacity: ${index === 0 ? 1 : 0};">
                    </div>
                `;
                carouselInner.appendChild(slide);
            });

            // Set initial state for pagination
            document.getElementById('current-slide').innerText = '01';
            document.getElementById('total-slides').innerText = totalSlides.toString().padStart(2, '0');

            // 2. Setup Arrow Navigation Listeners (No Change)
            document.getElementById('prev-btn').addEventListener('click', showPrevSlide);
            document.getElementById('next-btn').addEventListener('click', showNextSlide);

            // 3. Start Background Audio on First User Interaction (No Change)
            document.addEventListener('click', startAudio, {
                once: true
            });
            document.addEventListener('keydown', startAudio, {
                once: true
            });

            // Build Product Grid
            buildProductGrid();

            // Setup Custom Cursor
            setupCustomCursor();

            // NEW: Get reference to the welcome video element
            const welcomeVideo = document.getElementById('welcome-video');

            // Setup Observers
            setupSectionAnimations('about-section');
            setupSectionAnimations('contact-section');
            // MODIFIED: Pass the welcomeVideo element to the observer setup
            setupScrollTransitionObserver(welcomeVideo);

            // 1. Initial State for Slideshow
            if (document.location.hash === '#product-section') {
                startAutoSlide();
            }

            // 2. Toggle View Listener
            document.getElementById('toggle-view-btn').addEventListener('click', toggleProductView);

            // 3. Modal Listeners
            document.getElementById('drink-now-btn').addEventListener('click', (e) => {
                e.preventDefault();
                openModal(e);
            });
            closeModalBtn.addEventListener('click', closeModal);
            document.getElementById('final-drink-now-btn').addEventListener('click', () => {
                soundMgr.play('open');
                closeModal();
            });

            // A11Y: Close modal on ESC key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('open')) {
                    closeModal();
                }
            });

            // 5. Section Transition for Nav and Experience Button (No Change)
            document.querySelectorAll('a[href^="#"], #start-experience-btn').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = this.getAttribute('href');

                    // Only apply wipe transition to main vertical sections
                    if (['#welcome-section', '#product-section', '#about-section', '#contact-section'].includes(target)) {
                        transitionToSection(target);
                    } else {
                        document.querySelector(target).scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

        });
    </script>
</body>

</html>
